<div>
    <div>რეგისტრაცია</div>
    @if(registrationError){
        <div>{{registrationError}}</div>
    }
    <form #registrationForm = "ngForm" [formGroup]="formControl">

        <div>
            <label for="firstName">სახელი</label>
            <input type="text" placeholder="( მინიმუმ 5 სიმბოლო )" id="firstName" formControlName = "firstName"/>

            <div *ngIf="formControl.get('firstName')?.errors?.['required'] && formControl.get('firstName')?.touched">
                სახელი აუცილებელია
            </div>
            <div *ngIf="formControl.get('firstName')?.errors?.['minlength'] && formControl.get('firstName')?.touched">
                სახელი უნდა შეიცავდეს მინიმუმ 5 სიმბოლოს
            </div>

        </div>

        <div>
            <div>
                <label for="email">Email</label>
                <button [disabled]="!formControl.get('email')?.valid" (click)="addActivationCode()">KODIS GAGZAVNA</button>
            </div>
            
            <input type="email" id="email" formControlName = "email"/>
            <div *ngIf="formControl.get('email')?.errors?.['required'] && formControl.get('email')?.touched">
                Email-ი აუცილებელია
            </div>
            <div *ngIf="formControl.get('email')?.errors?.['email'] && formControl.get('email')?.touched">
                შეიყვანეთ სწორი Email-ი 
            </div>

        </div>

        <div>
            <label for="personalNumber">პირადი ნომერი</label>
            <input type="text" placeholder="00000000000" id="personalNumber" formControlName = "personalNumber" maxlength="11"/>
            <div *ngIf="formControl.get('personalNumber')?.errors?.['required'] && formControl.get('personalNumber')?.touched">
                პირადი ნომერი აუცილებელია
            </div>

            <div *ngIf="formControl.get('personalNumber')?.errors?.['minlength'] && formControl.get('personalNumber')?.touched">
                პირადი ნომერი უნდა შეიცავდეს 11 სიმბოლოს
            </div>

        </div>

        <div>
            <label for="lastName">გვარი</label>
            <input id="lastName" formControlName = "lastName"/>
            <div *ngIf="formControl.get('lastName')?.errors?.['required'] && formControl.get('lastName')?.dirty">
                გვარი აუცილებელია
            </div>
        </div>

        
        <div>
            <div>
                <label for="activationCode">აქტივაციის კოდი</label>
                <p>{{ minutes }}:{{ seconds < 10 ? '0' + seconds : seconds }}</p>
            </div>     
            <input id="activationCode" formControlName="activationCode"/>
            @if (isTimerEnded) {
                <div>*ბმულის მოქმედების ვადა ამოიწურა</div>
            }
        </div> 

        <div>
            <label for="password">პაროლი</label>
            <input type="password" placeholder="( მინიმუმ 8 სიმბოლო : @ 7 , )" id="password" formControlName = "password"/>
            <div *ngIf="formControl.get('password')?.errors?.['required'] && formControl.get('password')?.touched">
                პაროლი აუცილებელია
            </div>
            <div *ngIf="formControl.get('password')?.errors?.['minlength'] && formControl.get('password')?.touched">
                პაროლი უნდა შეიცავდეს მინიმუმ 8 სიმბოლოს
            </div>
        </div>

        
    </form>

    <div >
        <button  (click)="addPatient()">რეგისტრაცია</button>
    </div>
   
</div>

