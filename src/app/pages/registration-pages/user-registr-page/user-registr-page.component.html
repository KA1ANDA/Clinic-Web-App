<div class="wrap">

    <div class="title">რეგისტრაცია</div>
    @if(registrationError){
        <div>{{registrationError}}</div>
    }

    <form #registrationForm = "ngForm" [formGroup]="formControl">

        <div>
            <label for="firstName">სახელი</label>
            <input type="text" placeholder="( მინიმუმ 5 სიმბოლო )" id="firstName" formControlName = "firstName"/>

            <div class="input-error" *ngIf="formControl.get('firstName')?.errors?.['required'] && formControl.get('firstName')?.touched">
                *სახელი აუცილებელია
            </div>
            <div class="input-error" *ngIf="formControl.get('firstName')?.errors?.['minlength'] && formControl.get('firstName')?.touched">
                *სახელი უნდა შეიცავდეს მინიმუმ 5 სიმბოლოს
            </div>

        </div>

        <div>
        
            <label for="email">Email</label>
            
            <div class="email-wrap">
                <input type="email" id="email" formControlName = "email"/>
                <button [disabled]="!formControl.get('email')?.valid" (click)="addActivationCode()" class="send-email-button">
                    <svg xmlns="http://www.w3.org/2000/svg" width="25" height="20" viewBox="0 0 48 48"><rect width="48" height="48" fill="none"/><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4"><path d="M44 24V9H4v30h20m20-5H30m9-5l5 5l-5 5"/><path d="m4 9l20 15L44 9"/></g></svg>
                </button>
            </div>
            <div class="input-error" *ngIf="formControl.get('email')?.errors?.['required'] && formControl.get('email')?.touched">
                *Email-ი აუცილებელია
            </div>
            <div class="input-error" *ngIf="formControl.get('email')?.errors?.['email'] && formControl.get('email')?.touched">
                *შეიყვანეთ სწორი Email-ი 
            </div>

        </div>

        <div>
            <label for="personalNumber">პირადი ნომერი</label>
            <input type="text" placeholder="00000000000" id="personalNumber" formControlName = "personalNumber" maxlength="11"/>
            <div class="input-error" *ngIf="formControl.get('personalNumber')?.errors?.['required'] && formControl.get('personalNumber')?.touched">
                *პირადი ნომერი აუცილებელია
            </div>

            <div class="input-error" *ngIf="formControl.get('personalNumber')?.errors?.['minlength'] && formControl.get('personalNumber')?.touched">
                *პირადი ნომერი უნდა შეიცავდეს 11 სიმბოლოს
            </div>

        </div>

        <div>
            <label for="lastName">გვარი</label>
            <input id="lastName" formControlName = "lastName"/>
            <div class="input-error" *ngIf="formControl.get('lastName')?.errors?.['required'] && formControl.get('lastName')?.dirty">
                *გვარი აუცილებელია
            </div>
        </div>

        
        <div>
            <div class="activation-code-title">
                <label for="activationCode">აქტივაციის კოდი</label>
                <p>ვადა {{ minutes }}:{{ seconds < 10 ? '0' + seconds : seconds }}  წთ</p>
            </div>     
            <input id="activationCode" formControlName="activationCode"/>
            @if (isTimerEnded) {
                <div class="input-error" >*ბმულის მოქმედების ვადა ამოიწურა</div>
            }
        </div> 

        <div>
            <label for="password">პაროლი</label>
            <input type="password" placeholder="( მინიმუმ 8 სიმბოლო : @ 7 , )" id="password" formControlName = "password"/>
            <div class="input-error" *ngIf="formControl.get('password')?.errors?.['required'] && formControl.get('password')?.touched">
                *პაროლი აუცილებელია
            </div>
            <div class="input-error" *ngIf="formControl.get('password')?.errors?.['minlength'] && formControl.get('password')?.touched">
                *პაროლი უნდა შეიცავდეს მინიმუმ 8 სიმბოლოს
            </div>
        </div>

        
    </form>

    <div class="registration-button-wrap">
        <button class="registration-button" (click)="addPatient()">რეგისტრაცია</button>
    </div>
   
</div>

